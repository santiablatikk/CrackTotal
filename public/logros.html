<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content="Logros y recompensas en CRACK TOTAL, el juego del rosco futbolero. Desbloquea 50 logros diferentes jugando PASALA CHE." />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#1e293b">
  <meta name="google-adsense-account" content="ca-pub-9579152019412427">
  <title>Logros - CRACK TOTAL | PASALA CHE</title>
  <!-- Preconexiones -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Favicon -->
  <link rel="icon" href="img/favicon.ico" type="image/x-icon">
  <!-- Estilos -->
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/achievements.css" />
  <link rel="stylesheet" href="css/footer-styles.css" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Fuentes -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9579152019412427" crossorigin="anonymous"></script>
</head>
<body>
  <header class="main-header">
    <div class="logo-animation">
      <i class="fas fa-futbol ball-icon bounce"></i>
    </div>
    <a href="game-rosco.html" class="title-link">
      <h1 class="title-text">PASALA CHE</h1>
    </a>
    <p class="subtitle">El juego de palabras del fútbol</p>
  </header>
  
  <div class="achievements-page">
    <!-- Partículas decorativas -->
    <div class="particles" id="particles"></div>
    
    <div class="page-header">
      <h1>TROFEOS Y LOGROS</h1>
      <p>Demuestra tu habilidad y conocimiento futbolero desbloqueando estos 50 logros. 
        Cada uno representa un desafío único en el juego del Rosco.</p>
    </div>
    
    <!-- Contador de logros desbloqueados -->
    <div class="achievements-summary" id="achievements-summary">
      <div class="achievement-counter">
        <span id="unlocked-count">0</span>/<span id="total-count">50</span>
        <span class="counter-label">logros desbloqueados</span>
      </div>
    </div>
    
    <div class="achievement-categories">
      <button class="category-filter active" data-category="all">Todos los Logros</button>
      <button class="category-filter" data-category="principiante">Principiante</button>
      <button class="category-filter" data-category="intermedio">Intermedio</button>
      <button class="category-filter" data-category="experto">Experto</button>
      <button class="category-filter" data-category="maestria">Maestría</button>
      <button class="category-filter" data-category="coleccionista">Coleccionista</button>
      <button class="category-filter" data-category="especial">Especial</button>
    </div>
    
    <div class="achievements-container" id="achievements-container">
      <!-- Los logros se cargarán dinámicamente con JavaScript -->
    </div>
    
    <button onclick="window.history.back()" class="back-button" title="Volver atrás">
      <i class="fas fa-arrow-left"></i>
    </button>
  </div>
  
  <!-- Google AdSense -->
  <div class="ad-container">
    <p class="ad-label">Publicidad</p>
    <ins class="adsbygoogle"
      style="display:block"
      data-ad-client="ca-pub-1234567890"
      data-ad-slot="1234567890"
      data-ad-format="auto"
      data-full-width-responsive="true"></ins>
    <script>
      const cookieConsent = localStorage.getItem('cookieConsent');
      if (cookieConsent === 'accepted') {
        (adsbygoogle = window.adsbygoogle || []).push({});
      }
    </script>
  </div>
  
  <!-- Footer -->
  <footer class="policy-footer">
    <div class="footer-links-mini">
      <a href="portal.html"><i class="fas fa-home"></i> Portal</a>
      <a href="game-rosco.html"><i class="fas fa-gamepad"></i> Jugar</a>
      <a href="terms.html"><i class="fas fa-file-contract"></i> Términos</a>
      <a href="privacy.html"><i class="fas fa-lock"></i> Privacidad</a>
      <a href="blog.html"><i class="fas fa-blog"></i> Blog</a>
      <a href="contact.html"><i class="fas fa-envelope"></i> Contacto</a>
      <a href="about.html"><i class="fas fa-info-circle"></i> Acerca de</a>
    </div>
    <div class="share-button-container">
      <button id="share-button" class="share-button"><i class="fas fa-share-alt"></i> Compartir</button>
    </div>
    <div class="copyright-text">&copy; Abril 2025 CRACK TOTAL - El Juego del Rosco Futbolero</div>
    <div class="footer-social-icons">
      <a href="https://www.facebook.com/cracktotal" target="_blank" rel="noopener" class="social-icon"><i class="fab fa-facebook-f"></i></a>
      <a href="https://twitter.com/cracktotal" target="_blank" rel="noopener" class="social-icon"><i class="fab fa-twitter"></i></a>
      <a href="https://www.instagram.com/cracktotal" target="_blank" rel="noopener" class="social-icon"><i class="fab fa-instagram"></i></a>
      <a href="https://www.youtube.com/c/cracktotal" target="_blank" rel="noopener" class="social-icon"><i class="fab fa-youtube"></i></a>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="js/utils.js"></script>
  <script src="js/game-data.js"></script>
  <script src="js/achievements-data.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Obtener el contenedor de logros
      const achievementsContainer = document.getElementById('achievements-container');
      if (!achievementsContainer) return;
      
      // Categorías de logros
      const ACHIEVEMENT_CATEGORIES = {
        PRINCIPIANTE: 'principiante',
        INTERMEDIO: 'intermedio',
        EXPERTO: 'experto',
        MAESTRIA: 'maestria',
        COLECCIONISTA: 'coleccionista',
        ESPECIAL: 'especial'
      };

      // Utilizar los logros completos si están disponibles
      let gameAchievements = {};
      if (window.FULL_GAME_ACHIEVEMENTS) {
        gameAchievements = window.FULL_GAME_ACHIEVEMENTS;
      } else if (window.GameData && GameData.GAME_ACHIEVEMENTS) {
        gameAchievements = GameData.GAME_ACHIEVEMENTS;
      }

      // Obtener logros desbloqueados
      let unlockedAchievements = [];
      try {
        const saved = localStorage.getItem('unlockedAchievements');
        if (saved) {
          unlockedAchievements = JSON.parse(saved);
        }
      } catch (e) {
        console.error("Error al cargar logros:", e);
      }
      
      // Actualizar contador de logros desbloqueados
      const unlockedCount = document.getElementById('unlocked-count');
      const totalCount = document.getElementById('total-count');
      
      if (unlockedCount && totalCount) {
        unlockedCount.textContent = unlockedAchievements.length;
        totalCount.textContent = Object.keys(gameAchievements).length;
      }
      
      // Verificar si hay logros recién desbloqueados
      const recentlyUnlocked = [];
      try {
        const recentUnlocked = sessionStorage.getItem('recentlyUnlockedAchievements');
        if (recentUnlocked) {
          JSON.parse(recentUnlocked).forEach(id => recentlyUnlocked.push(id));
          // Limpiar después de cargar
          sessionStorage.removeItem('recentlyUnlockedAchievements');
        }
      } catch (e) {
        console.error("Error al cargar logros recientes:", e);
      }
      
      // Función para cargar logros filtrados por categoría
      function loadFilteredAchievements(category = 'all') {
        // Obtener todos los IDs de logros
        const achievementIds = Object.keys(gameAchievements);
        
        // Filtrar por categoría si es necesario
        const filteredIds = category === 'all' 
          ? achievementIds
          : achievementIds.filter(id => {
              const achievement = gameAchievements[id];
              return achievement && achievement.category === category;
            });
        
        // Si no hay logros, mostrar mensaje
        if (filteredIds.length === 0) {
          achievementsContainer.innerHTML = `
            <div class="no-achievements">
              <i class="fas fa-medal"></i>
              <p>No hay logros en esta categoría.</p>
            </div>
          `;
          return;
        }
        
        // Generar HTML para los logros
        let html = '<div class="achievements-grid">';
        
        filteredIds.forEach(id => {
          const achievementData = gameAchievements[id];
          if (!achievementData) return;
          
          const isUnlocked = unlockedAchievements.includes(id);
          const isRecentlyUnlocked = recentlyUnlocked.includes(id);
          
          const statusClass = isUnlocked ? '' : 'locked';
          const newClass = isRecentlyUnlocked ? 'new-unlock' : '';
          const justUnlockedClass = isRecentlyUnlocked ? 'just-unlocked' : '';
          
          html += `
            <div class="achievement-card ${statusClass} ${newClass} ${justUnlockedClass}">
              <div class="achievement-icon">
                <i class="${achievementData.icon || 'fas fa-award'}"></i>
              </div>
              <div class="achievement-details">
                <h3 class="achievement-title">${achievementData.title}</h3>
                <p class="achievement-description">${achievementData.description}</p>
                <div class="achievement-progress">
                  <div class="achievement-progress-bar"></div>
                </div>
                ${isUnlocked ? `
                <div class="achievement-date">
                  Desbloqueado: ${new Date().toLocaleDateString()}
                </div>
                ` : ''}
              </div>
            </div>
          `;
        });
        
        html += '</div>';
        achievementsContainer.innerHTML = html;
      }
      
      // Cargar todos los logros inicialmente
      loadFilteredAchievements('all');
      
      // Configurar filtros por categoría
      const categoryFilters = document.querySelectorAll('.category-filter');
      categoryFilters.forEach(filter => {
        filter.addEventListener('click', function() {
          // Actualizar clase activa
          categoryFilters.forEach(f => f.classList.remove('active'));
          this.classList.add('active');
          
          // Cargar logros filtrados
          loadFilteredAchievements(this.dataset.category);
        });
      });
      
      // Crear partículas decorativas
      const particlesContainer = document.getElementById('particles');
      if (particlesContainer) {
        for (let i = 0; i < 30; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          particle.style.left = `${Math.random() * 100}%`;
          particle.style.top = `${Math.random() * 100}%`;
          particle.style.width = `${Math.random() * 4 + 1}px`;
          particle.style.height = particle.style.width;
          particle.style.opacity = Math.random() * 0.5 + 0.1;
          particle.style.animationDuration = `${Math.random() * 30 + 10}s`;
          particle.style.animationDelay = `${Math.random() * 5}s`;
          particlesContainer.appendChild(particle);
        }
      }
    });
  </script>
  
  <!-- Script para compartir -->
  <script src="js/share-buttons.js"></script>
  
  <!-- Script para el footer global -->
  <script src="js/global-footer.js"></script>
</body>
</html>
