<!DOCTYPE html>
<html lang="es">
<head>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('consent', 'default', {
      'ad_storage': 'denied',
      'analytics_storage': 'denied',
      'ad_user_data': 'denied',
      'ad_personalization': 'denied',
      'functionality_storage': 'denied',
      'personalization_storage': 'denied',
      'security_storage': 'granted',
      'wait_for_update': 500
    });
    gtag('set', 'ads_data_redaction', true);
    gtag('set', 'url_passthrough', true);
    
    // Specify region
    gtag('set', 'region', 'ES');
  </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mentiroso - Crack Total</title>
    <link rel="icon" href="/portada.ico" type="image/x-icon">
    <link rel="canonical" href="https://www.cracktotal.com/mentiroso.html">
    <link rel="alternate" hreflang="es" href="https://www.cracktotal.com/mentiroso.html" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.cracktotal.com/mentiroso.html">
    <meta property="og:title" content="Crack Total - Mentiroso (1v1)">
    <meta property="og:description" content="Desafiá a otro jugador en Mentiroso, el juego de astucia y conocimiento futbolístico de Crack Total.">
    <meta property="og:image" content="https://www.cracktotal.com/images/mentiroso_card.jpg"> <!-- Placeholder - Create this image -->

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.cracktotal.com/mentiroso.html">
    <meta property="twitter:title" content="Crack Total - Mentiroso (1v1)">
    <meta property="twitter:description" content="Desafiá a otro jugador en Mentiroso, el juego de astucia y conocimiento futbolístico.">
    <meta property="twitter:image" content="https://www.cracktotal.com/images/mentiroso_card.jpg"> <!-- Placeholder - Create this image -->
    <meta property="twitter:site" content="@cracktotal_">

    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/mentiroso.css"> <!-- Changed from qsm.css -->
    <link rel="stylesheet" href="css/modals.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Oswald:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta name="description" content="Mentiroso - Desafía a tus amigos en este juego de fútbol de astucia y conocimiento.">
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9579152019412427"
     crossorigin="anonymous"></script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5XP3T1RTH7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-5XP3T1RTH7');
    </script>

    <!-- Schema.org Markup for WebPage -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage", 
      "name": "Mentiroso - Crack Total",
      "description": "Jugá 1 contra 1 en Mentiroso, el juego de astucia y conocimiento futbolístico en Crack Total.",
      "url": "https://www.cracktotal.com/mentiroso.html",
      "publisher": {
        "@type": "Organization",
        "name": "Crack Total",
        "logo": {
          "@type": "ImageObject",
          "url": "https://www.cracktotal.com/images/portada.jpg"
        }
      },
      "inLanguage": "es-AR",
      "gamePlatform": "Web Browser",
      "applicationCategory": "Game",
      "operatingSystem": "All"
    }
    </script>
    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/firebase-config.js"></script>
    <script type="module" src="js/mentiroso.js"></script> <!-- Changed from quiensabemas_1v1.js -->
</head>
<body class="game-body mentiroso-body">
    <!-- Skip Link para accesibilidad -->
    <a href="#main-content" class="skip-link">Saltar al contenido principal</a>
    
    <nav class="main-navigation" role="navigation" aria-label="NavegaciÃ³n principal">
        <a href="index.html" class="nav-logo" aria-label="Crack Total - Inicio">
            Crack Total <i class="fas fa-futbol" aria-hidden="true"></i>
        </a>
        <button class="nav-toggle" aria-label="Abrir menÃº de navegaciÃ³n" aria-expanded="false">
            <i class="fas fa-bars" aria-hidden="true"></i>
        </button>
        <ul>
            <li><a href="index.html" aria-label="Ir al inicio"><i class="fas fa-home" aria-hidden="true"></i> Inicio</a></li>
            <li><a href="games.html" aria-label="Ir a los juegos"><i class="fas fa-gamepad" aria-hidden="true"></i> Juegos</a></li>
            <li><a href="profile.html" aria-label="Ver mi perfil"><i class="fas fa-user" aria-hidden="true"></i> Perfil</a></li>
            <li><a href="ranking.html" aria-label="Ver ranking general"><i class="fas fa-trophy" aria-hidden="true"></i> Rankings</a></li>
            <li><a href="logros.html" aria-label="Ver mis logros"><i class="fas fa-medal" aria-hidden="true"></i> Logros</a></li>
            <li><a href="blog.html" aria-label="Leer el blog"><i class="fas fa-blog" aria-hidden="true"></i> Blog</a></li>
            <li><a href="about.html" aria-label="Acerca de nosotros"><i class="fas fa-info-circle" aria-hidden="true"></i> Acerca de</a></li>
            <li><a href="contact.html" aria-label="Contactar con nosotros"><i class="fas fa-envelope" aria-hidden="true"></i> Contacto</a></li>
        </ul>
    </nav> <!-- Changed class -->
    
    <div class="game-layout">
        <!-- Header Mejorado -->
        <header class="game-header modern-header">
            <div class="container header-container">
                 <a href="games.html" class="logo-link">
                     <h1 class="logo">
                         <span class="logo-text">Crack Total</span>
                         <i class="fas fa-futbol logo-ball"></i>
                     </h1>
                 </a>
                 <div class="game-title-header">Mentiroso <span class="game-mode-badge">1v1</span></div>
                 <div class="players-info-header" id="playersHeaderInfo" style="display: none;">
                     <div class="player-box local-player" id="player1Info">
                         <span class="player-avatar"><i class="fas fa-user"></i></span>
                         <span class="player-details">
                             <span class="player-name" id="player1Name">Jugador 1</span>
                             <span class="score" id="player1Score">Puntos: 0</span>
                         </span>
                     </div>
                     <span class="vs-separator">VS</span>
                     <div class="player-box opponent-player" id="player2Info">
                         <span class="player-avatar"><i class="fas fa-user-secret"></i></span>
                         <span class="player-details">
                            <span class="player-name" id="player2Name">Jugador 2</span>
                            <span class="score" id="player2Score">Puntos: 0</span>
                        </span>
                     </div>
                 </div>
            </div>
        </header>

        <!-- Lobby Section -->
        <section id="lobbySection" class="lobby-container active">
            <div class="container lobby-container-inner">
                <h2 class="lobby-title">Lobby Mentiroso <i class="fas fa-user-secret"></i></h2>
                <p class="lobby-subtitle">Crea o únete a una sala para jugar Mentiroso.</p>
                <div id="lobbyMessageArea" class="lobby-message"></div>
                <div class="lobby-grid">
                    <div class="lobby-column lobby-actions-column">
                        <div class="lobby-card create-room-card">
                            <h3><i class="fas fa-plus-circle"></i> Crear Sala Nueva</h3>
                            <div class="form-group">
                                <label for="createPlayerName">Tu Nombre:</label>
                                <input type="text" id="createPlayerName" class="lobby-input" placeholder="Nombre de Jugador" value="Jugador 1">
                            </div>
                            <div class="form-group">
                                <label for="createRoomPassword">Contraseña (Opcional):</label>
                                <input type="password" id="createRoomPassword" class="lobby-input" placeholder="Deja vacío para sala pública">
                            </div>
                            <button id="createRoomButton" class="primary-button lobby-button create-btn">Crear Sala</button>
                        </div>
                        <div class="lobby-card join-room-card">
                            <h3><i class="fas fa-sign-in-alt"></i> Unirse a Sala</h3>
                             <div class="form-group">
                                <label for="joinPlayerName">Tu Nombre:</label>
                                <input type="text" id="joinPlayerName" class="lobby-input" placeholder="Nombre de Jugador" value="Jugador 2">
                            </div>
                            <div class="join-options">
                                <div class="join-by-id">
                                    <h4>Unirse por ID</h4>
                                    <div class="form-group">
                                        <label for="joinRoomId">ID de Sala:</label>
                                        <input type="text" id="joinRoomId" class="lobby-input" placeholder="Introduce el ID">
                                    </div>
                                    <div class="form-group">
                                        <label for="joinRoomPassword">Contraseña (si aplica):</label>
                                        <input type="password" id="joinRoomPassword" class="lobby-input" placeholder="Contraseña de la sala">
                                    </div>
                                    <button id="joinRoomButton" class="secondary-button lobby-button join-id-btn">Unirse por ID</button>
                                </div>
                                <div class="join-random">
                                    <h4><i class="fas fa-random"></i> O unirse a una sala aleatoria</h4>
                                    <button id="joinRandomRoomButton" class="secondary-button lobby-button join-random-btn">Buscar Sala Aleatoria</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="lobby-column available-rooms-column">
                        <div id="availableRoomsSection" class="lobby-card available-rooms-card">
                            <h3><i class="fas fa-list-ul"></i> Salas Disponibles (Mentiroso)</h3>
                            <ul id="availableRoomsList" class="rooms-list">
                                <li class="no-rooms-message">Buscando salas... <i class="fas fa-spinner fa-spin"></i></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Game Content Section (Mentiroso) -->
        <main id="gameContentSection" class="game-content mentiroso-content" style="display: none;">
            <div class="container game-area">
                <div class="game-status">
                    <span id="gameRoundDisplay">
                        <i class="fas fa-trophy"></i> 
                        <span class="round-info">
                            <span class="category-counter">Categoría 1/6: Fútbol Argentino</span>
                            <span class="question-counter">Pregunta 1/3</span>
                            <span class="global-counter">Progreso: 1/18</span>
                        </span>
                    </span>
                </div>
                
                <div class="categories-progress">
                    <div class="category-pill" data-category="0">Fútbol Argentino</div>
                    <div class="category-pill" data-category="1">Libertadores</div>
                    <div class="category-pill" data-category="2">Mundiales</div>
                    <div class="category-pill" data-category="3">Champions</div>
                    <div class="category-pill" data-category="4">Selección</div>
                    <div class="category-pill" data-category="5">General</div>
                </div>

                <div class="game-card mentiroso-card">
                    <div class="challenge-area">
                        <h3 class="mentiroso-challenge-text" id="challengeText">Puedo nombrar X ...</h3>
                        <p class="current-bid-text" id="currentBidText">Apuesta actual: Ninguna</p>
                    </div>

                    <div class="interaction-area" id="interactionArea">
                        <!-- This area will change based on game phase -->
                        
                        <!-- Bidding Phase -->
                        <div id="biddingPhase" class="phase-active">
                            <p id="playerTurnBidText">Tu turno para apostar o decir "Mentiroso"</p>
                            <div class="form-group">
                                <label for="bidInput">¿Cuántos puedes nombrar?</label>
                                <input type="number" id="bidInput" class="modern-input" placeholder="Ej: 5" min="1">
                            </div>
                            <div class="action-buttons-mentiroso">
                                <button id="submitBidButton" class="primary-button mentiroso-action-btn">
                                    <i class="fas fa-gavel"></i> Apostar
                                </button>
                                <button id="callMentirosoButton" class="danger-button mentiroso-action-btn">
                                    <i class="fas fa-comment-slash"></i> ¡Mentiroso!
                                </button>
                            </div>
                        </div>

                        <!-- Listing Answers Phase -->
                        <div id="listingPhase" style="display: none;">
                            <p id="listingInstructionText">¡Te llamaron Mentiroso! Nombra los <span id="bidToListCount">X</span> ítems:</p>
                            <div class="form-group">
                                <textarea id="answerListArea" class="modern-textarea" rows="6" placeholder="Escribe un ítem por línea..."></textarea>
                            </div>
                            <button id="submitAnswersButton" class="primary-button mentiroso-action-btn">
                                <i class="fas fa-list-ol"></i> Enviar Lista
                            </button>
                        </div>

                        <!-- Validation Phase -->
                        <div id="validationPhase" style="display: none;">
                            <p id="validationInstructionText">Valida las respuestas de tu oponente:</p>
                            <ul id="answersToValidateList" class="answers-to-validate">
                                <!-- JS will populate this like:
                                <li><span>Respuesta 1</span> <button class="validate-correct"><i class="fas fa-check"></i></button> <button class="validate-incorrect"><i class="fas fa-times"></i></button></li>
                                -->
                            </ul>
                            <button id="submitValidationButton" class="primary-button mentiroso-action-btn">
                                <i class="fas fa-check-double"></i> Confirmar Validación
                            </button>
                        </div>
                    </div>

                    <div class="feedback-area" id="feedbackArea">
                        <!-- Mensajes de feedback -->
                    </div>
                </div>

                <div class="waiting-area" id="waitingArea">
                    <div class="spinner"></div>
                    <p>Esperando al oponente...</p>
                </div>
            </div>
        </main>
        
        <footer class="site-footer"> 
            <div class="footer-content">
              <div class="footer-links">
                <a href="index.html"><i class="fas fa-home"></i> Inicio</a>
                <a href="blog.html"><i class="fas fa-blog"></i> Blog</a>
                <a href="contact.html"><i class="fas fa-envelope"></i> Contacto</a>
                <a href="cookies.html"><i class="fas fa-cookie-bite"></i> Cookies</a>
                <a href="privacy.html"><i class="fas fa-lock"></i> Privacidad</a>
                <a href="terminos.html"><i class="fas fa-file-contract"></i> Términos</a>
                <a href="about.html"><i class="fas fa-info-circle"></i> Acerca de</a>
              </div>
              <button class="footer-share-button" onclick="shareSite()"><i class="fas fa-share-alt"></i> Compartir</button>
               <div class="footer-copyright">
                 &copy; 2025 Crack Total. Todos los derechos reservados. 
               </div>
            </div>
        </footer>

        <!-- Modal Fin de Juego para Mentiroso -->
        <div class="modal-overlay" id="gameResultModalMentiroso">
            <div class="modal-content result-modal">
                <div class="result-modal-header">
                    <h3 class="modal-title result-title" id="resultTitleMentiroso">¡Juego Terminado!</h3>
                </div>
                <div class="result-message" id="resultMessageMentiroso">Calculando resultados...</div>
                <div class="result-stats" id="resultStatsMentiroso">
                    <!-- Stats se llenarán dinámicamente -->
                </div>
                <div class="result-buttons">
                    <button id="playAgainButtonMentiroso" class="modal-button primary play-again-button">
                         <i class="fas fa-redo-alt"></i> Jugar Otra Vez
                    </button>
                    <button id="backToLobbyButtonMentiroso" class="modal-button secondary back-lobby-button">
                        <i class="fas fa-arrow-left"></i> Volver al Lobby
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal para ingresar contraseña de sala privada (reutilizado de QSM, podría necesitar ID específicos si hay conflictos) -->
        <div class="modal-overlay" id="privateRoomPasswordModal">
            <div class="modal-content password-prompt-modal">
                <h3 class="modal-title" id="passwordModalTitle">Ingresar Contraseña</h3>
                <p id="passwordModalText">La sala '[Room ID]' es privada. Por favor, ingresá la contraseña:</p>
                <form id="privateRoomPasswordForm">
                    <div class="form-group">
                        <label for="passwordModalInput">Contraseña:</label>
                        <input type="password" id="passwordModalInput" class="lobby-input" required autocomplete="current-password">
                        <div class="input-focus-border"></div> 
                    </div>
                    <div id="passwordErrorText" class="error-message-inline" style="display: none;"></div>
                    <div class="modal-footer">
                        <button type="button" id="cancelPasswordSubmit" class="modal-button secondary">Cancelar</button>
                        <button type="submit" id="submitPasswordButton" class="modal-button primary">Unirse</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar el orden de las pills de categorías al inicio
            const categoryOrder = [
                "Fútbol Argentino",
                "Libertadores",
                "Mundiales", 
                "Champions League",
                "Selección Argentina",
                "Fútbol General"
            ];
            
            // Asegurar que las categorías se resalten correctamente
            window.addEventListener('mentirosoNextRound', function(e) {
                if (e.detail) {
                    const categoryIndex = e.detail.globalCategoryIndex || 0;
                    
                    // Obtener la categoría esperada según el índice
                    const expectedCategory = categoryOrder[categoryIndex];
                    console.log(`Actualizando UI para categoría ${categoryIndex+1}/6: ${expectedCategory}`);
                    
                    // Actualizar pills de categorías
                    document.querySelectorAll('.category-pill').forEach(pill => {
                        pill.classList.remove('active', 'completed');
                        
                        const pillIndex = parseInt(pill.getAttribute('data-category'));
                        
                        if (pillIndex < categoryIndex) {
                            pill.classList.add('completed');
                        } else if (pillIndex === categoryIndex) {
                            pill.classList.add('active');
                            // Asegurar texto correcto
                            if (pill.textContent.trim() !== expectedCategory.trim() && 
                                pill.textContent.trim() !== expectedCategory.split(' ')[0]) {
                                console.warn(`Texto incorrecto en pill: ${pill.textContent}, debería ser: ${expectedCategory}`);
                            }
                        }
                    });
                }
            });
        });
    </script>
    
    <style>
        .categories-progress {
            display: flex;
            justify-content: space-between;
            margin: 10px 0 15px;
            flex-wrap: wrap;
            gap: 5px;
            padding: 5px;
            background-color: rgba(0,0,0,0.1);
            border-radius: 12px;
        }
        
        .category-pill {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 500;
            opacity: 0.6;
            transition: all 0.3s ease;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .category-pill.active {
            background-color: #e74c3c;
            opacity: 1;
            font-weight: bold;
            transform: scale(1.05);
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        
        .category-pill.completed {
            background-color: #2ecc71;
            opacity: 1;
        }
        
        /* Mejorar la visualización de desafío */
        .mentiroso-challenge-text {
            font-size: 1.4rem;
            text-align: center;
            padding: 10px 15px;
            background-color: rgba(44, 62, 80, 0.1);
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
        }
        
        @media (max-width: 768px) {
            .categories-progress {
                justify-content: center;
            }
            
            .category-pill {
                font-size: 0.75rem;
                padding: 5px 10px;
                margin: 2px;
            }
            
            .mentiroso-challenge-text {
                font-size: 1.2rem;
                padding: 8px 12px;
            }
        }
    </style>
</body>
</html> 
